"use strict";(self["webpackChunkeden"]=self["webpackChunkeden"]||[]).push([[151],{3794:function(t,e,s){s.d(e,{Z:function(){return k}});var l=s(6252),a=s(3577),n=s(9963);const i={class:"m-5"},c={class:"pagination justify-content-center"},o=(0,l._)("span",{"aria-hidden":"true"},"«",-1),d=[o],u=["onClick"],r=(0,l._)("span",{"aria-hidden":"true"},"»",-1),p=[r];function _(t,e,s,o,r,_){return(0,l.wg)(),(0,l.iD)("nav",i,[(0,l._)("ul",c,[(0,l._)("li",{class:(0,a.C_)(["page-item",{disabled:!s.pages.has_pre}])},[(0,l._)("a",{href:"#",class:"page-link",onClick:e[0]||(e[0]=(0,n.iM)((t=>_.updatePage(s.pages.current_page-1)),["prevent"]))},d)],2),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.pages.total_pages,(t=>((0,l.wg)(),(0,l.iD)("li",{class:(0,a.C_)(["page-item",{active:t===s.pages.current_page}]),key:t+"page"},[(0,l._)("a",{href:"#",class:"page-link",onClick:(0,n.iM)((e=>_.updatePage(t)),["prevent"])},(0,a.zw)(t),9,u)],2)))),128)),(0,l._)("li",{class:(0,a.C_)(["page-item",{disabled:!s.pages.has_next}])},[(0,l._)("a",{href:"#",class:"page-link",onClick:e[1]||(e[1]=(0,n.iM)((t=>_.updatePage(s.pages.current_page+1)),["prevent"]))},p)],2)])])}var g={name:"PaginationComponent",props:["pages"],methods:{updatePage(t){this.$emit("get-Items",t)}}},h=s(3744);const m=(0,h.Z)(g,[["render",_]]);var k=m},6151:function(t,e,s){s.r(e),s.d(e,{default:function(){return R}});var l=s(6252),a=s(3577);const n={class:"container py-4 py-lg-5"},i=(0,l._)("h1",{class:"fw-bold text-center mb-4 mb-lg-5"},[(0,l.Uk)("我的訂單 "),(0,l._)("span",{class:"dancing h2 text-secondary fw-bold"},"Orders")],-1),c={class:"row"},o=(0,l._)("dt",{class:"col-sm-3"},"訂單編號",-1),d={class:"col-sm-9"},u=(0,l._)("dt",{class:"col-sm-3"},"訂單成立時間",-1),r={class:"col-sm-9"},p=(0,l._)("br",null,null,-1),_=(0,l._)("dt",{class:"col-sm-3"},"訂單內容",-1),g={class:"col-sm-9"},h={class:"list-unstyled"},m=(0,l._)("dt",{class:"col-sm-3"},"訂購人資訊",-1),k={class:"col-sm-9"},w=(0,l._)("br",null,null,-1),b=(0,l._)("br",null,null,-1),y=(0,l._)("br",null,null,-1),v=(0,l._)("dt",{class:"col-sm-3"},"金額",-1),f={class:"col-sm-9"},z=(0,l._)("dt",{class:"col-sm-3"},"付款狀態",-1),$={class:"col-sm-9"},D={key:0},U=(0,l._)("span",{class:"text-danger me-3"},"尚未付款",-1),x=(0,l._)("button",{type:"button",class:"btn btn-primary"},"去付款",-1),C={key:1,class:"text-success"},H=(0,l._)("span",{class:"me-3"},"付款完成",-1),O=(0,l._)("button",{type:"button",class:"btn btn-outline-primary"},"查看",-1),L={class:"d-none d-md-block"},P={class:"table table-sm align-middle"},W=(0,l._)("thead",null,[(0,l._)("th",null,"訂單資訊"),(0,l._)("th",null,"訂單內容"),(0,l._)("th",null,"訂購人資訊"),(0,l._)("th",null,"付款狀態")],-1),Y=(0,l._)("br",null,null,-1),K={class:"list-unstyled"},M=(0,l._)("br",null,null,-1),Z=(0,l._)("br",null,null,-1),S=(0,l._)("br",null,null,-1),j={key:0},A=(0,l._)("span",{class:"text-danger me-3"},"尚未付款",-1),I=(0,l._)("button",{type:"button",class:"btn standardBtn"},"去付款",-1),q={key:1,class:"text-success me-3"},G=(0,l.Uk)("付款完成 "),B=(0,l._)("button",{type:"button",class:"btn btn-outline-primary"},"查看",-1);function E(t,e,s,E,T,F){const J=(0,l.up)("Loading-component"),N=(0,l.up)("router-link"),Q=(0,l.up)("pagination-component");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(J,{active:T.isLoading},null,8,["active"]),(0,l._)("div",n,[i,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(T.orders,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,class:"d-md-none p-3 my-3 border"},[(0,l._)("dl",c,[o,(0,l._)("dd",d,(0,a.zw)(e.id),1),u,(0,l._)("dd",r,[(0,l._)("p",null,[(0,l.Uk)((0,a.zw)(t.$filters.date(e.create_at))+" ",1),p,(0,l.Uk)(" "+(0,a.zw)(t.$filters.time(e.create_at)),1)])]),_,(0,l._)("dd",g,[(0,l._)("ul",h,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.values(e.products),((t,e)=>((0,l.wg)(),(0,l.iD)("li",{key:e},(0,a.zw)(t.product.title)+" x "+(0,a.zw)(t.qty)+" "+(0,a.zw)(t.product.unit),1)))),128))])]),m,(0,l._)("dd",k,[(0,l.Uk)((0,a.zw)(e.user.name)+" ",1),w,(0,l.Uk)(" "+(0,a.zw)(e.user.email)+" ",1),b,(0,l.Uk)(" "+(0,a.zw)(e.user.tel)+" ",1),y,(0,l.Uk)(" "+(0,a.zw)(e.user.address),1)]),v,(0,l._)("dd",f,(0,a.zw)(e.total)+" 元",1),z,(0,l._)("dd",$,[e.is_paid?((0,l.wg)(),(0,l.iD)("div",C,[H,(0,l.Wm)(N,{to:`/checkout/${e.id}`},{default:(0,l.w5)((()=>[O])),_:2},1032,["to"])])):((0,l.wg)(),(0,l.iD)("div",D,[U,(0,l.Wm)(N,{to:`/checkout/${e.id}`},{default:(0,l.w5)((()=>[x])),_:2},1032,["to"])]))])])])))),128)),(0,l._)("div",L,[(0,l._)("table",P,[W,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(T.orders,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",null,[(0,l._)("p",null,(0,a.zw)(e.id),1),(0,l._)("p",null,[(0,l.Uk)((0,a.zw)(t.$filters.date(e.create_at))+" ",1),Y,(0,l.Uk)(" "+(0,a.zw)(t.$filters.time(e.create_at)),1)])]),(0,l._)("td",null,[(0,l._)("ul",K,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.values(e.products),((t,e)=>((0,l.wg)(),(0,l.iD)("li",{key:e},(0,a.zw)(t.product.title)+" x "+(0,a.zw)(t.qty),1)))),128))]),(0,l.Uk)(" "+(0,a.zw)(e.total)+" 元 ",1)]),(0,l._)("td",null,[(0,l.Uk)((0,a.zw)(e.user.name)+" ",1),M,(0,l.Uk)(" "+(0,a.zw)(e.user.email)+" ",1),Z,(0,l.Uk)(" "+(0,a.zw)(e.user.tel)+" ",1),S,(0,l.Uk)(" "+(0,a.zw)(e.user.address),1)]),(0,l._)("td",null,[e.is_paid?((0,l.wg)(),(0,l.iD)("div",q,[G,(0,l.Wm)(N,{to:`/checkout/${e.id}`},{default:(0,l.w5)((()=>[B])),_:2},1032,["to"])])):((0,l.wg)(),(0,l.iD)("div",j,[A,(0,l.Wm)(N,{to:`/checkout/${e.id}`},{default:(0,l.w5)((()=>[I])),_:2},1032,["to"])]))])])))),128))])])]),(0,l.Wm)(Q,{pages:T.pagination,onGetItems:F.getOrders},null,8,["pages","onGetItems"])])],64)}var T=s(3794),F=s(4902),J={data(){return{checkSuccess:!1,orders:[],tempOrder:{},pagination:{},isLoading:!1}},components:{PaginationComponent:T.Z},methods:{checkAdmin(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");t?(this.$http.defaults.headers.common.Authorization=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/user/check").then((()=>{this.checkSuccess=!0})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息"),this.$router.push("/login")}))):(F.Z.emit("push-message",{style:"success",title:"錯誤訊息",content:"您尚未登入"}),this.$router.push("/login"))},getOrders(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/ycl/orders").then((t=>{this.orders=t.data.orders,this.pagination=t.data.pagination,this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息"),this.isLoading=!1}))}},mounted(){document.title="Eden Handmade | 我的訂單",this.checkAdmin(),this.getOrders()}},N=s(3744);const Q=(0,N.Z)(J,[["render",E]]);var R=Q}}]);
//# sourceMappingURL=151.5c514515.js.map