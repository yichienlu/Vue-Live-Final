{"version":3,"file":"js/801.f3540dd8.js","mappings":"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","sources":["webpack://eden/./src/views/FavoritesView.vue","webpack://eden/./src/views/FavoritesView.vue?0637"],"sourcesContent":["<template>\r\n  <Loading-component :active=\"isLoading\"></Loading-component>\r\n  <div class=\"img-cover position-relative\" style=\"height: 25vh; background-image:url('https://images.unsplash.com/photo-1624459311940-0137c5ae2aa8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80');\">\r\n    <h1 class=\"position-absolute top-100 start-50 translate-middle fw-bolder fst-italic dancing\" style=\"font-size: 4rem\">Favorites</h1>\r\n  </div>\r\n  <div class=\"container my-5 py-5\">\r\n    <div v-if=\"favorite.length == 0\" class=\"my-5 text-center\">\r\n      <h5>最愛清單裡沒有東西！快去逛逛吧！！</h5>\r\n      <router-link to=\"/products\" class=\"btn btn-primary\">\r\n        去逛逛\r\n      </router-link>\r\n    </div>\r\n    <div v-else class=\"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 gx-4 gy-5\">\r\n      <template v-for=\"product in products\" :key=\"product.id\">\r\n        <div class=\"col\" v-if=\"this.favorite.includes(product.id)\">\r\n          <div class=\"card border-0 h-100 product-card position-relative\">\r\n            <router-link :to=\"`/product/${product.id}`\" class=\"stretched-link\"></router-link>\r\n            <div class=\"card-img-top position-relative\" :style=\"`height:200px; background-image: url(${product.imageUrl}); background-size: cover; background-position:center`\">\r\n              <div class=\"position-absolute top-0 bottom-0 start-0 end-0 product-more\" style=\"background-color: rgba(0,0,0,0.5)\">\r\n                <i class=\"fs-2 bi bi-search position-absolute top-50 start-50 translate-middle text-secondary\"></i>\r\n                <router-link :to=\"`/product/${product.id}`\" class=\"stretched-link\"></router-link>\r\n              </div>\r\n              <button type=\"button\" class=\"btn position-absolute top-0 end-0 border-0 favoriteBtn\" @click=\"toggleFavorite(product.id)\" style=\"z-index: 980\">\r\n                <i v-if=\"this.favorite.includes(product.id)\" class=\"bi bi-heart-fill fs-3\"></i>\r\n                <i v-else class=\"bi bi-heart fs-3\"></i>\r\n              </button>\r\n            </div>\r\n            <div class=\"card-body p-0\">\r\n              <div class=\"fw-bold mt-2\">{{ product.title }}</div>\r\n              <small class=\"card-text mb-2\">{{ product.description }}</small>\r\n            </div>\r\n            <div class=\"card-footer d-flex align-items-center justify-content-between mt-2 p-0 bg-transparent border-0\">\r\n              <div>\r\n                <div class=\"text-primary\" v-if=\"product.price===product.origin_price\">\r\n                    $ {{ product.origin_price }}\r\n                </div>\r\n                <div v-else>\r\n                  <span class=\"text-danger me-1\">$ {{ product.price }} </span>\r\n                  <del class=\"text-muted\" style=\"font-size: 0.5rem\">$ {{ product.origin_price }} </del>\r\n                </div>\r\n              </div>\r\n              <button type=\"button\" style=\"z-index: 980\" class=\"btn btn-sm standardBtn\" @click=\"addToCart(product.id)\" :disabled=\"isLoading\">\r\n                  加入購物車\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport emitter from '@/libs/emitter'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      cartData: {\r\n        carts: []\r\n      },\r\n      products: [],\r\n      product: {},\r\n      isLoading: false,\r\n      favorite: JSON.parse(localStorage.getItem('favorite')) || []\r\n    }\r\n  },\r\n  methods: {\r\n    getProducts () {\r\n      this.$http\r\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`)\r\n        .then((response) => {\r\n          this.products = response.data.products\r\n          this.isLoading = false\r\n          emitter.emit('get-favorite')\r\n        })\r\n        .catch((error) => {\r\n          this.$httpMessageState(error.response, '錯誤訊息')\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    getFavorite () {\r\n      this.favorite = JSON.parse(localStorage.getItem('favorite')) || []\r\n    },\r\n    addToCart (id, qty = 1) {\r\n      if (qty < 1 || qty % 1 !== 0) {\r\n        this.emitter.emit('push-message', {\r\n          style: 'success',\r\n          title: '錯誤訊息',\r\n          content: '輸入數量錯誤'\r\n        })\r\n        return\r\n      }\r\n      const data = {\r\n        product_id: id,\r\n        qty\r\n      }\r\n      this.isLoading = true\r\n      this.$http\r\n        .post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`, { data })\r\n        .then((response) => {\r\n          this.$httpMessageState(response, '加入購物車')\r\n          emitter.emit('get-cart')\r\n          this.isLoading = false\r\n        })\r\n        .catch((error) => {\r\n          this.$httpMessageState(error.response, '加入購物車')\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    toggleFavorite (id) {\r\n      const favoriteIndex = this.favorite.findIndex(item => item === id)\r\n      if (favoriteIndex === -1) {\r\n        this.favorite.push(id)\r\n      } else {\r\n        this.favorite.splice(favoriteIndex, 1)\r\n      }\r\n      localStorage.setItem('favorite', JSON.stringify(this.favorite))\r\n      emitter.emit('get-favorite')\r\n    }\r\n  },\r\n  watch: {\r\n    favorite: {\r\n      handler () {\r\n        localStorage.setItem('favorite', JSON.stringify(this.favorite))\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  mounted () {\r\n    document.title = 'Eden Handmade | 我的最愛'\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./FavoritesView.vue?vue&type=template&id=68ee3dee\"\nimport script from \"./FavoritesView.vue?vue&type=script&lang=js\"\nexport * from \"./FavoritesView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Vue-Live-Final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","style","_createVNode","_component_Loading_component","active","$data","_hoisted_1","length","_createElementBlock","_hoisted_4","_component_router_link","to","_Fragment","_renderList","product","id","favorite","includes","imageUrl","_hoisted_10","type","onClick","$options","_toDisplayString","title","description","price","origin_price","_hoisted_19","disabled","_hoisted_22","data","cartData","carts","products","isLoading","JSON","parse","localStorage","getItem","methods","getProducts","this","$http","get","then","response","emitter","catch","error","$httpMessageState","getFavorite","addToCart","qty","emit","content","product_id","post","toggleFavorite","favoriteIndex","findIndex","item","push","splice","setItem","stringify","watch","handler","deep","mounted","document","__exports__","render"],"sourceRoot":""}