"use strict";(self["webpackChunkeden"]=self["webpackChunkeden"]||[]).push([[801],{5801:function(t,e,i){i.r(e),i.d(e,{default:function(){return I}});var s=i(6252),o=i(3577);const a=(0,s._)("div",{class:"img-cover position-relative",style:{height:"25vh","background-image":"url('https://images.unsplash.com/photo-1624459311940-0137c5ae2aa8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80')"}},[(0,s._)("h1",{class:"position-absolute top-100 start-50 translate-middle fw-bolder fst-italic dancing",style:{"font-size":"4rem"}},"Favorites")],-1),r={class:"container my-5 py-5"},c={key:0,class:"my-5 text-center"},l=(0,s._)("h5",null,"最愛清單裡沒有東西！快去逛逛吧！！",-1),n=(0,s.Uk)(" 去逛逛 "),d={key:1,class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 gx-4 gy-5"},p={key:0,class:"col"},u={class:"card border-0 h-100 product-card position-relative"},g={class:"position-absolute top-0 bottom-0 start-0 end-0 product-more",style:{"background-color":"rgba(0,0,0,0.5)"}},h=(0,s._)("i",{class:"fs-2 bi bi-search position-absolute top-50 start-50 translate-middle text-secondary"},null,-1),v=["onClick"],f={key:0,class:"bi bi-heart-fill fs-3"},m={key:1,class:"bi bi-heart fs-3"},b={class:"card-body p-0"},y={class:"fw-bold mt-2"},w={class:"card-text mb-2"},k={class:"card-footer d-flex align-items-center justify-content-between mt-2 p-0 bg-transparent border-0"},_={key:0,class:"text-primary"},x={key:1},D={class:"text-danger me-1"},S={class:"text-muted",style:{"font-size":"0.5rem"}},$=["onClick","disabled"];function z(t,e,i,z,L,C){const H=(0,s.up)("Loading-component"),M=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(H,{active:L.isLoading},null,8,["active"]),a,(0,s._)("div",r,[0==L.favorite.length?((0,s.wg)(),(0,s.iD)("div",c,[l,(0,s.Wm)(M,{to:"/products",class:"btn btn-primary"},{default:(0,s.w5)((()=>[n])),_:1})])):((0,s.wg)(),(0,s.iD)("div",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(L.products,(t=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t.id},[this.favorite.includes(t.id)?((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("div",u,[(0,s.Wm)(M,{to:`/product/${t.id}`,class:"stretched-link"},null,8,["to"]),(0,s._)("div",{class:"card-img-top position-relative",style:(0,o.j5)(`height:200px; background-image: url(${t.imageUrl}); background-size: cover; background-position:center`)},[(0,s._)("div",g,[h,(0,s.Wm)(M,{to:`/product/${t.id}`,class:"stretched-link"},null,8,["to"])]),(0,s._)("button",{type:"button",class:"btn position-absolute top-0 end-0 border-0 favoriteBtn",onClick:e=>C.toggleFavorite(t.id),style:{"z-index":"980"}},[this.favorite.includes(t.id)?((0,s.wg)(),(0,s.iD)("i",f)):((0,s.wg)(),(0,s.iD)("i",m))],8,v)],4),(0,s._)("div",b,[(0,s._)("div",y,(0,o.zw)(t.title),1),(0,s._)("small",w,(0,o.zw)(t.description),1)]),(0,s._)("div",k,[(0,s._)("div",null,[t.price===t.origin_price?((0,s.wg)(),(0,s.iD)("div",_," $ "+(0,o.zw)(t.origin_price),1)):((0,s.wg)(),(0,s.iD)("div",x,[(0,s._)("span",D,"$ "+(0,o.zw)(t.price),1),(0,s._)("del",S,"$ "+(0,o.zw)(t.origin_price),1)]))]),(0,s._)("button",{type:"button",style:{"z-index":"980"},class:"btn btn-sm standardBtn",onClick:e=>C.addToCart(t.id),disabled:L.isLoading}," 加入購物車 ",8,$)])])])):(0,s.kq)("",!0)],64)))),128))]))])],64)}var L=i(4902),C={data(){return{cartData:{carts:[]},products:[],product:{},isLoading:!1,favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},methods:{getProducts(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/ycl/products/all").then((t=>{this.products=t.data.products,this.isLoading=!1,L.Z.emit("get-favorite")})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息"),this.isLoading=!1}))},getFavorite(){this.favorite=JSON.parse(localStorage.getItem("favorite"))||[]},addToCart(t,e=1){if(e<1||e%1!==0)return void this.emitter.emit("push-message",{style:"success",title:"錯誤訊息",content:"輸入數量錯誤"});const i={product_id:t,qty:e};this.isLoading=!0,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/ycl/cart",{data:i}).then((t=>{this.$httpMessageState(t,"加入購物車"),L.Z.emit("get-cart"),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"加入購物車"),this.isLoading=!1}))},toggleFavorite(t){const e=this.favorite.findIndex((e=>e===t));-1===e?this.favorite.push(t):this.favorite.splice(e,1),localStorage.setItem("favorite",JSON.stringify(this.favorite)),L.Z.emit("get-favorite")}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0}},mounted(){document.title="Eden Handmade | 我的最愛",this.getProducts()}},H=i(3744);const M=(0,H.Z)(C,[["render",z]]);var I=M}}]);
//# sourceMappingURL=801.f3540dd8.js.map