"use strict";(self["webpackChunkeden"]=self["webpackChunkeden"]||[]).push([[373],{3794:function(t,e,s){s.d(e,{Z:function(){return v}});var i=s(6252),a=s(3577),o=s(9963);const r={class:"m-5"},n={class:"pagination justify-content-center"},l=(0,i._)("span",{"aria-hidden":"true"},"«",-1),c=[l],d=["onClick"],p=(0,i._)("span",{"aria-hidden":"true"},"»",-1),g=[p];function u(t,e,s,l,p,u){return(0,i.wg)(),(0,i.iD)("nav",r,[(0,i._)("ul",n,[(0,i._)("li",{class:(0,a.C_)(["page-item",{disabled:!s.pages.has_pre}])},[(0,i._)("a",{href:"#",class:"page-link",onClick:e[0]||(e[0]=(0,o.iM)((t=>u.updatePage(s.pages.current_page-1)),["prevent"]))},c)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.pages.total_pages,(t=>((0,i.wg)(),(0,i.iD)("li",{class:(0,a.C_)(["page-item",{active:t===s.pages.current_page}]),key:t+"page"},[(0,i._)("a",{href:"#",class:"page-link",onClick:(0,o.iM)((e=>u.updatePage(t)),["prevent"])},(0,a.zw)(t),9,d)],2)))),128)),(0,i._)("li",{class:(0,a.C_)(["page-item",{disabled:!s.pages.has_next}])},[(0,i._)("a",{href:"#",class:"page-link",onClick:e[1]||(e[1]=(0,o.iM)((t=>u.updatePage(s.pages.current_page+1)),["prevent"]))},g)],2)])])}var h={name:"PaginationComponent",props:["pages"],methods:{updatePage(t){this.$emit("get-Items",t)}}},b=s(3744);const m=(0,b.Z)(h,[["render",u]]);var v=m},9373:function(t,e,s){s.r(e),s.d(e,{default:function(){return W}});var i=s(6252),a=s(3577),o=s(9963);const r=(0,i._)("div",{class:"img-cover position-relative",style:{height:"25vh","background-image":"url('https://images.unsplash.com/photo-1624459311940-0137c5ae2aa8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80')"}},[(0,i._)("h1",{class:"position-absolute top-100 start-50 translate-middle fw-bolder fst-italic dancing",style:{"font-size":"4rem"}},"Products")],-1),n={class:"container my-5 py-5"},l={class:"row"},c={class:"col-lg-2 position-relative"},d={class:"list-unstyled d-none justify-content-between d-lg-block position-sticky",style:{top:"100px"}},p=["onClick"],g={class:"col-lg-10 position-relative"},u={class:"list-unstyled bg-white d-flex justify-content-between d-lg-none position-sticky py-3",style:{top:"60px","z-index":"990"}},h=["onClick"],b={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 gx-4 gy-5"},m={class:"card border-0 h-100 product-card position-relative"},v={class:"position-absolute top-0 bottom-0 start-0 end-0 product-more",style:{"background-color":"rgba(0,0,0,0.5)"}},f=(0,i._)("i",{class:"fs-2 bi bi-search position-absolute top-50 start-50 translate-middle text-secondary"},null,-1),y=["onClick"],_={key:0,class:"bi bi-heart-fill fs-3"},w={key:1,class:"bi bi-heart fs-3"},k={class:"card-body p-0"},C={class:"fw-bold mt-2"},x={class:"card-text mb-2"},D={class:"card-footer d-flex align-items-center justify-content-between mt-2 p-0 bg-transparent border-0"},P={key:0,class:"text-primary"},$={key:1},z={class:"text-danger me-1"},M={class:"text-muted",style:{"font-size":"0.5rem"}},S=["onClick","disabled"];function L(t,e,s,L,H,I){const j=(0,i.up)("Loading-component"),Y=(0,i.up)("router-link"),Z=(0,i.up)("pagination-component");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(j,{active:H.isLoading},null,8,["active"]),r,(0,i._)("div",n,[(0,i._)("div",l,[(0,i._)("div",c,[(0,i._)("ul",d,[(0,i._)("li",{class:(0,a.C_)(["mb-3 me-3 pb-1 pb-lg-0 ps-lg-1",{"bg-primary":""==H.selectedCategory}])},[(0,i._)("a",{href:"#",onClick:e[0]||(e[0]=(0,o.iM)((t=>I.getProducts(1,"")),["prevent"])),class:(0,a.C_)(["d-block p-2 p-lg-3 bg-white",{"fw-bold":""==H.selectedCategory}])}," 全部商品",2)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(H.categories,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:(0,a.C_)(["mb-3 me-3 pb-1 pb-lg-0 ps-lg-1",{"bg-primary":H.selectedCategory==t}])},[(0,i._)("a",{href:"#",onClick:(0,o.iM)((e=>I.getProducts(1,t)),["prevent"]),class:(0,a.C_)(["d-block p-2 p-lg-3 bg-white",{"fw-bold":H.selectedCategory==t}])},(0,a.zw)(t),11,p)],2)))),128))])]),(0,i._)("div",g,[(0,i._)("ul",u,[(0,i._)("li",{class:(0,a.C_)(["me-3 pb-1 pb-lg-0 ps-lg-1",{"bg-primary":""==H.selectedCategory}])},[(0,i._)("a",{href:"#",onClick:e[1]||(e[1]=(0,o.iM)((t=>I.getProducts(1,"")),["prevent"])),class:(0,a.C_)(["d-none d-sm-block p-2 p-lg-3 bg-white",{"fw-bold":""==H.selectedCategory}])}," 全部商品",2)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(H.categories,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:(0,a.C_)(["me-3 pb-1 pb-lg-0 ps-lg-1",{"bg-primary":H.selectedCategory==t}])},[(0,i._)("a",{href:"#",onClick:(0,o.iM)((e=>I.getProducts(1,t)),["prevent"]),class:(0,a.C_)(["d-block p-2 p-lg-3 bg-white",{"fw-bold":H.selectedCategory==t}])},(0,a.zw)(t),11,h)],2)))),128))]),(0,i._)("div",b,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(H.products,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col",key:t.id},[(0,i._)("div",m,[(0,i.Wm)(Y,{to:`/product/${t.id}`,class:"stretched-link"},null,8,["to"]),(0,i._)("div",{class:"card-img-top position-relative",style:(0,a.j5)(`height:200px; background-image: url(${t.imageUrl}); background-size: cover; background-position:center`)},[(0,i._)("div",v,[f,(0,i.Wm)(Y,{to:`/product/${t.id}`,class:"stretched-link"},null,8,["to"])]),(0,i._)("button",{type:"button",class:"btn position-absolute top-0 end-0 border-0 favoriteBtn",onClick:e=>I.toggleFavorite(t.id),style:{"z-index":"980"}},[this.favorite.includes(t.id)?((0,i.wg)(),(0,i.iD)("i",_)):((0,i.wg)(),(0,i.iD)("i",w))],8,y)],4),(0,i._)("div",k,[(0,i._)("div",C,(0,a.zw)(t.title),1),(0,i._)("small",x,(0,a.zw)(t.description),1)]),(0,i._)("div",D,[(0,i._)("div",null,[t.price===t.origin_price?((0,i.wg)(),(0,i.iD)("div",P," $ "+(0,a.zw)(t.origin_price),1)):((0,i.wg)(),(0,i.iD)("div",$,[(0,i._)("span",z,"$ "+(0,a.zw)(t.price),1),(0,i._)("del",M,"$ "+(0,a.zw)(t.origin_price),1)]))]),(0,i._)("button",{type:"button",style:{"z-index":"980"},class:"btn btn-sm standardBtn",onClick:e=>I.addToCart(t.id),disabled:H.isLoading}," 加入購物車 ",8,S)])])])))),128))]),(0,i.Wm)(Z,{pages:H.pagination,onGetItems:I.getProducts},null,8,["pages","onGetItems"])])])])],64)}var H=s(4902),I=s(3794),j={data(){return{cartData:{carts:[]},products:[],product:{},categories:[],selectedCategory:"",pagination:{},currentPage:1,isLoading:!1,favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},components:{PaginationComponent:I.Z},methods:{getProducts(t=1,e=""){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/ycl/products/?page=${t}&category=${e}`).then((s=>{this.products=s.data.products,this.pagination=s.data.pagination,this.selectedCategory=e,this.currentPage=t,this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息"),this.isLoading=!1}))},getCategories(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/ycl/products/all").then((t=>{this.categories=Array.from(new Set(t.data.products.map((t=>t.category)))).reverse()})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息")}))},addToCart(t,e=1){if(e<1||e%1!==0)return void this.emitter.emit("push-message",{style:"success",title:"錯誤訊息",content:"輸入數量錯誤"});const s={product_id:t,qty:e};this.isLoading=!0,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/ycl/cart",{data:s}).then((t=>{this.$httpMessageState(t,"加入購物車"),H.Z.emit("get-cart"),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"加入購物車"),this.isLoading=!1}))},toggleFavorite(t){const e=this.favorite.findIndex((e=>e===t));-1===e?this.favorite.push(t):this.favorite.splice(e,1),localStorage.setItem("favorite",JSON.stringify(this.favorite)),H.Z.emit("get-favorite")}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0}},mounted(){document.title="Eden Handmade | 線上商店",this.getProducts(),this.getCategories()}},Y=s(3744);const Z=(0,Y.Z)(j,[["render",L]]);var W=Z}}]);
//# sourceMappingURL=373.a6e127a5.js.map